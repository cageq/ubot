(function(e){function t(t){for(var n,l,r=t[0],s=t[1],u=t[2],i=0,h=[];i<r.length;i++)l=r[i],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&h.push(a[l][0]),a[l]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);d&&d(t);while(h.length)h.shift()();return c.push.apply(c,u||[]),o()}function o(){for(var e,t=0;t<c.length;t++){for(var o=c[t],n=!0,r=1;r<o.length;r++){var s=o[r];0!==a[s]&&(n=!1)}n&&(c.splice(t--,1),e=l(l.s=o[0]))}return e}var n={},a={app:0},c=[];function l(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=n,l.d=function(e,t,o){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(o,n,function(t){return e[t]}.bind(null,n));return o},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var d=s;c.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"15c7":function(e,t,o){"use strict";o("9c39")},"4c45":function(e,t,o){"use strict";o("d3ab")},"56d7":function(e,t,o){"use strict";o.r(t);var n=o("7a23"),a=o("1566");const c={style:{"padding-left":"30px"}};function l(e,t,o,a,l,r){const s=Object(n["resolveComponent"])("n-switch"),u=Object(n["resolveComponent"])("n-space"),d=Object(n["resolveComponent"])("n-layout-header"),i=Object(n["resolveComponent"])("Chat"),h=Object(n["resolveComponent"])("n-layout-content"),b=Object(n["resolveComponent"])("n-layout-footer"),v=Object(n["resolveComponent"])("n-layout"),m=Object(n["resolveComponent"])("n-config-provider");return Object(n["openBlock"])(),Object(n["createBlock"])(m,{theme:e.ui_theme},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(v,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{bordered:""},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,{size:"large","content-style":"padding: 4px;"},{default:Object(n["withCtx"])(()=>[Object(n["createElementVNode"])("span",c,[Object(n["createTextVNode"])(" 黑色主题: "),Object(n["createVNode"])(s,{value:e.is_black_theme,"onUpdate:value":[t[0]||(t[0]=t=>e.is_black_theme=t),e.doChangeTheme]},null,8,["value","onUpdate:value"])])]),_:1})]),_:1}),Object(n["createVNode"])(h,{"content-style":" "},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(i,{ref:"chat_ref",onStatusEvent:e.onStatusChange},null,8,["onStatusEvent"])]),_:1}),Object(n["createVNode"])(b,{bordered:""},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Status: "+Object(n["toDisplayString"])(e.service_status),1)]),_:1})]),_:1})]),_:1},8,["theme"])}o("14d9");var r=o("7e34"),s=o("bbe5"),u=o("472e"),d=o("6dc5"),i=o("a2f9"),h=o("9139");function b(e,t,o,a,c,l){const r=Object(n["resolveComponent"])("MdPreview"),s=Object(n["resolveComponent"])("MdCatalog"),u=Object(n["resolveComponent"])("n-form-item"),d=Object(n["resolveComponent"])("n-input"),i=Object(n["resolveComponent"])("n-button"),h=Object(n["resolveComponent"])("n-input-group"),b=Object(n["resolveComponent"])("n-form"),v=Object(n["resolveComponent"])("n-layout");return Object(n["openBlock"])(),Object(n["createBlock"])(v,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(b,{model:e.new_chat,"label-placement":"left",class:"chat-form","label-width":80,style:{maxWidth:"100%"}},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(u,{path:"history",style:{height:"calc(100vh - 100px)"}},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(r,{editorId:e.editor_id,modelValue:e.new_chat.history,theme:e.editor_theme,style:{height:"calc(100vh - 100px)"}},null,8,["editorId","modelValue","theme"]),Object(n["createVNode"])(s,{editorId:e.editor_id,scrollElement:e.scrollElement,theme:e.editor_theme},null,8,["editorId","scrollElement","theme"])]),_:1}),Object(n["createVNode"])(u,{path:"newTalk"},{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(h,null,{default:Object(n["withCtx"])(()=>[Object(n["createVNode"])(d,{value:e.new_chat.newTalk,"onUpdate:value":t[0]||(t[0]=t=>e.new_chat.newTalk=t),style:{width:"100%"},placeholder:"Ask something...",onKeydown:Object(n["withKeys"])(e.handleEnter,["enter"])},null,8,["value","onKeydown"]),Object(n["createVNode"])(i,{type:"primary",onClick:e.doTalk},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Send ")]),_:1},8,["onClick"]),Object(n["createVNode"])(i,{type:"info",onClick:e.doDraw},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(" Draw ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}var v=o("918d"),m=o("5c63"),p=(o("3013"),Object(n["defineComponent"])({name:"Chat",components:{MdPreview:v["a"],MdCatalog:m["a"]},data(){return{message:""}},created(){},setup(e,t){var o=Object(n["ref"])("");const a="preview-editor",c=document.documentElement,l=Object(n["ref"])("# Hello, UBot!"),r=Object(n["ref"])({history:"",newTalk:"",contentEditor:"",theme:"dark"}),s=e=>{console.log("change theme to "+e),o.value=e},u=Object(n["ref"])(""),d="ws://"+window.location.host;var i=!1,h=new WebSocket(d);const b=()=>{i=!0,console.log("websocket open success"),t.emit("status-event","online")},v=e=>{console.log(e),r.value.history+=e.data},m=()=>{i=!1,t.emit("status-event","offline")},p=()=>{O()},f=()=>(console.log("try to connect server"),h=new WebSocket(d),h.onopen=b,h.onmessage=v,h.onclose=m,h);Object(n["onMounted"])(()=>{}),setInterval((function(){i||(null!=h&&(h.removeEventListener("open",b),h.removeEventListener("message",v),h.removeEventListener("close",m),h=null),f())}),3e3);const O=()=>{console.log(u.value);var e={type:"talk",data:r.value.newTalk};try{console.log(e),h.send(JSON.stringify(e))}catch(o){return void(r.value.history+="\n服务错误，请重启服务或刷新页面！\n")}t.emit("chat-event",r),r.value.newTalk=""},j=()=>{console.log(u.value);var e={type:"draw",data:r.value.newTalk};try{console.log(e),h.send(JSON.stringify(e))}catch(o){return void(r.value.history+="\n服务错误，请重启服务或刷新页面！\n")}t.emit("chat-event",r),r.value.newTalk=""};return f(),{new_chat:r,doTalk:O,doDraw:j,changeTheme:s,handleEnter:p,markdown:l,editor_theme:o,editor_id:a,scrollElement:c}}})),f=(o("15c7"),o("6b0d")),O=o.n(f);const j=O()(p,[["render",b],["__scopeId","data-v-33f8abd2"]]);var g=j,_=Object(n["defineComponent"])({name:"UBox",components:{NLayout:u["b"],NLayoutHeader:d["a"],NLayoutContent:i["a"],NSpace:h["a"],Chat:g},setup(){const e=Object(n["ref"])("offline"),t=Object(n["ref"])(null),o=Object(n["ref"])({open_contract:"",close_contract:"",time_unit:"1",amount:"2",start_time:"",end_time:""});var a=localStorage.getItem("theme");a=null==a||"light"==a?"light":"dark";const c=Object(n["ref"])("light"==a?r["a"]:s["a"]),l=!(null==a||"light"==a),u=()=>{const e=localStorage.getItem("theme");console.log("current theme "+e),"dark"==c.value.name?(c.value=r["a"],localStorage.setItem("theme","light"),t.value.changeTheme("light")):(c.value=s["a"],localStorage.setItem("theme","dark"),t.value.changeTheme("dark"))},d=Object(n["ref"])([]),i=Object(n["ref"])(""),h=e=>{var t=e.value;const o=new Date;d.value.push({open_contract:t.open_contract,close_contract:t.close_contract,start_time:o,amount:t.amount}),p(),console.log("get child event"),console.dir(e.value.open_contract)},b=t=>{e.value=t},v=e=>{console.log("trade event"),console.log(e)},m=()=>{const e=localStorage.getItem("tasks");e&&(d.value=JSON.parse(e))};Object(n["onMounted"])(()=>{m();var e=localStorage.getItem("theme");e=null==e||"light"==e?"light":"dark",t.value.changeTheme(e)});const p=()=>{localStorage.setItem("tasks",JSON.stringify(d.value)),console.log(o)},f=()=>{console.log("add data "+i.value);const e=new Date;d.value.push({open_contract:o.value.open_contract,close_contract:o.value.close_contract,start_time:e,amount:o.value.amount}),p()};return{input_contract:i,task_list:d,addTask:f,new_task:o,handleMoveEvent:h,handleTradeEvent:v,darkTheme:s["a"],lightTheme:r["a"],ui_theme:c,doChangeTheme:u,is_black_theme:l,chat_ref:t,service_status:e,onStatusChange:b}}});o("4c45");const w=O()(_,[["render",l],["__scopeId","data-v-47babd68"]]);var y=w;const C=Object(n["createApp"])(y);C.use(a["a"]),C.mount("#app")},"9c39":function(e,t,o){},d3ab:function(e,t,o){}});
//# sourceMappingURL=app.389af37a.js.map